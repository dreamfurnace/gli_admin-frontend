import{d as $,r as a,p as Q,i as J,c as n,o as d,e,f as C,g as _,h as c,v as P,q as j,k as B,F as K,s as O,t as i,x as S,w as R,y as W,n as h}from"./index-1x3K-qxh.js";const X={class:"p-6 max-w-7xl mx-auto"},Y={class:"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4"},Z={class:"flex flex-col lg:flex-row gap-4"},ee={class:"flex-1"},te={class:"relative"},re={class:"lg:w-48"},oe={class:"lg:w-48"},le={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow p-8"},ae={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},se={class:"overflow-x-auto"},ne={class:"w-full"},de={class:"divide-y divide-gray-200 dark:divide-gray-600"},ie={class:"px-6 py-4"},ue={class:"text-sm font-medium text-gray-900 dark:text-white"},ge={class:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs"},ce={class:"px-6 py-4"},xe={class:"px-6 py-4"},ye={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},be={class:"px-6 py-4 text-center"},ve={class:"flex items-center justify-center space-x-2"},pe=["onClick"],fe=["onClick","title"],ke={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me=["onClick"],we={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow p-8"},Ce={class:"text-center"},_e={class:"text-gray-500 dark:text-gray-400 mb-4"},Me={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Pe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},je={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-600"},Be={class:"text-lg font-medium text-gray-900 dark:text-white"},Se={class:"flex items-center"},De={class:"flex justify-end space-x-3 pt-4"},Ve=["disabled"],Le={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},Ue={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Te={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full"},ze={class:"p-6"},Ae={class:"text-gray-700 dark:text-gray-300 mb-6"},Ie={class:"flex justify-end space-x-3"},Ee=["disabled"],Fe={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},qe=$({__name:"CompanyInfoView",setup(He){const u=a([]),M=a(!1),y=a(!1),b=a(!1),v=a(""),p=a(""),f=a(""),m=a(!1),w=a(!1),k=a(!1),g=a(null),l=a({title:"",content:"",category:"",isPublished:!1}),x=a(null),D=Q(()=>{let r=u.value;if(v.value){const t=v.value.toLowerCase();r=r.filter(s=>s.title.toLowerCase().includes(t)||s.content.toLowerCase().includes(t))}if(p.value&&(r=r.filter(t=>t.category===p.value)),f.value){const t=f.value==="published";r=r.filter(s=>s.isPublished===t)}return r}),T=async()=>{try{M.value=!0,u.value=await h.getBusinessContent()}catch(r){console.error("Failed to load content:",r)}finally{M.value=!1}},V=()=>{k.value=!1,l.value={title:"",content:"",category:"",isPublished:!1},x.value=null,m.value=!0},z=r=>{k.value=!0,l.value={title:r.title,content:r.content,category:r.category,isPublished:r.isPublished},x.value=r.id,m.value=!0},L=()=>{m.value=!1,l.value={title:"",content:"",category:"",isPublished:!1},x.value=null},A=async()=>{try{if(y.value=!0,k.value&&x.value){const r=await h.updateBusinessContent(x.value,l.value),t=u.value.findIndex(s=>s.id===x.value);t!==-1&&(u.value[t]=r)}else{const r=await h.createBusinessContent(l.value);u.value.unshift(r)}L()}catch(r){console.error("Failed to save content:",r)}finally{y.value=!1}},I=async r=>{try{const t=await h.updateBusinessContent(r.id,{isPublished:!r.isPublished}),s=u.value.findIndex(o=>o.id===r.id);s!==-1&&(u.value[s]=t)}catch(t){console.error("Failed to update publish status:",t)}},E=r=>{g.value=r,w.value=!0},F=()=>{g.value=null,w.value=!1},H=async()=>{if(g.value)try{b.value=!0,await h.deleteBusinessContent(g.value.id),u.value=u.value.filter(r=>r.id!==g.value.id),w.value=!1,g.value=null}catch(r){console.error("Failed to delete content:",r)}finally{b.value=!1}},N=r=>{const t={"company-info":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",team:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",strategy:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",general:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return t[r]||t.general},q=r=>({"company-info":"Company Info",team:"Team",strategy:"Strategy",general:"General"})[r]||"General",G=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return J(()=>{T()}),(r,t)=>{var s;return d(),n("div",X,[e("div",{class:"mb-6"},[e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Business Content Management"),e("p",{class:"text-gray-600 dark:text-gray-400"},"Manage company information and business content")],-1)),e("button",{onClick:V,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},t[7]||(t[7]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),_(" Create Content ")]))])]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[t[9]||(t[9]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>v.value=o),type:"text",placeholder:"Search content...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[P,v.value]])])]),e("div",re,[c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>p.value=o),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},t[10]||(t[10]=[B('<option value="">All Categories</option><option value="company-info">Company Info</option><option value="team">Team</option><option value="strategy">Strategy</option><option value="general">General</option>',5)]),512),[[j,p.value]])]),e("div",oe,[c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>f.value=o),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},t[11]||(t[11]=[e("option",{value:""},"All Status",-1),e("option",{value:"published"},"Published",-1),e("option",{value:"draft"},"Draft",-1)]),512),[[j,f.value]])])])]),M.value?(d(),n("div",le,t[12]||(t[12]=[e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e("span",{class:"ml-3 text-gray-600 dark:text-gray-400"},"Loading content...")],-1)]))):D.value.length>0?(d(),n("div",ae,[e("div",se,[e("table",ne,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Title "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Last Updated "),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",de,[(d(!0),n(K,null,O(D.value,o=>(d(),n("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ie,[e("div",ue,i(o.title),1),e("div",ge,i(o.content),1)]),e("td",ce,[e("span",{class:S(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",N(o.category)])},i(q(o.category)),3)]),e("td",xe,[e("span",{class:S(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.isPublished?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},i(o.isPublished?"Published":"Draft"),3)]),e("td",ye,i(G(o.updatedAt)),1),e("td",be,[e("div",ve,[e("button",{onClick:U=>z(o),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit"},t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,pe),e("button",{onClick:U=>I(o),class:S(o.isPublished?"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"),title:o.isPublished?"Unpublish":"Publish"},[o.isPublished?(d(),n("svg",ke,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)]))):(d(),n("svg",he,t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))],10,fe),e("button",{onClick:U=>E(o),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete"},t[16]||(t[16]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,me)])])]))),128))])])])])):(d(),n("div",we,[e("div",Ce,[t[19]||(t[19]=e("div",{class:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No content found",-1)),e("p",_e,i(v.value||p.value||f.value?"Try adjusting your filters":"Create your first business content to get started"),1),e("button",{onClick:V,class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},t[18]||(t[18]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),_(" Create Content ")]))])])),m.value?(d(),n("div",Me,[e("div",Pe,[e("div",je,[e("h3",Be,i(k.value?"Edit Content":"Create New Content"),1)]),e("form",{onSubmit:R(A,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Title",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"Enter content title"},null,512),[[P,l.value.title]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Category",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.category=o),required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},t[22]||(t[22]=[B('<option value="">Select category</option><option value="company-info">Company Info</option><option value="team">Team</option><option value="strategy">Strategy</option><option value="general">General</option>',5)]),512),[[j,l.value.category]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Content",-1)),c(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.content=o),required:"",rows:"10",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"Enter your content here..."},null,512),[[P,l.value.content]])]),e("div",null,[e("label",Se,[c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.isPublished=o),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[W,l.value.isPublished]]),t[25]||(t[25]=e("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Publish immediately",-1))])]),e("div",De,[e("button",{type:"button",onClick:L,class:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:y.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors flex items-center"},[y.value?(d(),n("div",Le)):C("",!0),_(" "+i(y.value?"Saving...":k.value?"Update":"Create"),1)],8,Ve)])],32)])])):C("",!0),w.value?(d(),n("div",Ue,[e("div",Te,[e("div",ze,[t[26]||(t[26]=B('<div class="flex items-center mb-4"><div class="w-10 h-10 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mr-4"><svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div><h3 class="text-lg font-medium text-gray-900 dark:text-white">Delete Content</h3><p class="text-sm text-gray-500 dark:text-gray-400">This action cannot be undone.</p></div></div>',1)),e("p",Ae,' Are you sure you want to delete "'+i((s=g.value)==null?void 0:s.title)+'"? ',1),e("div",Ie,[e("button",{onClick:F,class:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel "),e("button",{onClick:H,disabled:b.value,class:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors flex items-center"},[b.value?(d(),n("div",Fe)):C("",!0),_(" "+i(b.value?"Deleting...":"Delete"),1)],8,Ee)])])])])):C("",!0)])}}});export{qe as default};
